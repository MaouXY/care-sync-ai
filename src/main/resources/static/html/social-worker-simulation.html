<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI模拟训练 - CareSync AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#10B981',
                        accent: '#F97316',
                        neutral: '#6B7280',
                        light: '#F3F4F6',
                        dark: '#1F2937',
                        success: '#22C55E',
                        warning: '#F59E0B',
                        danger: '#EF4444'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .transition-custom {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
        }
    </style>
</head>
<body class="font-sans bg-light min-h-screen">
<!-- 头部导航 -->
<header class="bg-white shadow-md py-3 px-4">
    <div class="container mx-auto flex justify-between items-center">
        <div class="flex items-center space-x-3">
            <div class="text-primary font-bold text-xl flex items-center">
                <i class="fa fa-heartbeat mr-2 text-accent"></i>
                <span>CareSync AI</span>
            </div>
            <span class="text-xs bg-primary/10 text-primary px-2 py-1 rounded-full">社工端</span>
        </div>
        <div class="flex items-center space-x-4">
            <button class="relative text-neutral hover:text-primary transition-custom">
                <i class="fa fa-bell text-xl"></i>
                <span class="absolute -top-1 -right-1 w-4 h-4 bg-danger rounded-full text-white text-[10px] flex items-center justify-center">5</span>
            </button>
            <div class="relative group">
                <button class="flex items-center space-x-2 focus:outline-none">
                    <div class="w-9 h-9 bg-primary/10 rounded-full flex items-center justify-center text-primary">
                        <i class="fa fa-user"></i>
                    </div>
                    <span class="text-dark font-medium hidden sm:inline-block">李社工</span>
                </button>
                <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-10">
                    <div class="py-2">
                        <a href="social-worker-profile.html" class="block px-4 py-2 text-sm text-neutral hover:bg-light hover:text-primary transition-custom">
                            <i class="fa fa-user mr-2"></i> 个人中心
                        </a>
                        <a href="#" class="block px-4 py-2 text-sm text-neutral hover:bg-light hover:text-primary transition-custom">
                            <i class="fa fa-cog mr-2"></i> 设置
                        </a>
                        <div class="border-t border-gray-200 my-1"></div>
                        <a href="social-worker-login.html" class="block px-4 py-2 text-sm text-red-500 hover:bg-light transition-custom">
                            <i class="fa fa-sign-out mr-2"></i> 退出登录
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- 主要内容区域 -->
<main class="container mx-auto px-4 py-6 space-y-6">
    <!-- 页面标题 -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <h1 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-dark">AI模拟训练</h1>
        <p class="text-neutral mt-2">通过与AI模拟的留守儿童对话，提升您的沟通和服务能力</p>
    </div>

    <!-- 训练场景选择 -->
    <div id="scenario-selection" class="bg-white rounded-lg shadow-md p-6 space-y-4">
        <h2 class="text-xl font-bold text-dark">选择训练场景</h2>
        <p class="text-neutral">从以下场景中选择一个开始训练，或创建自定义场景</p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4">
            <!-- 场景卡片 1 -->
            <div class="border border-gray-200 rounded-lg p-4 cursor-pointer hover:border-primary hover:shadow-md transition-custom scenario-card" data-id="1">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="font-semibold text-dark">孤独的留守儿童</h3>
                    <span class="text-xs bg-secondary/10 text-secondary px-2 py-1 rounded-full">基础</span>
                </div>
                <p class="text-sm text-neutral mb-3">模拟一个性格内向、缺乏陪伴的留守儿童，需要建立信任关系。</p>
                <div class="flex items-center text-xs text-neutral">
                    <span class="mr-3"><i class="fa fa-clock-o mr-1"></i> 预计时长: 15分钟</span>
                    <span><i class="fa fa-signal mr-1"></i> 难度: 初级</span>
                </div>
            </div>

            <!-- 场景卡片 2 -->
            <div class="border border-gray-200 rounded-lg p-4 cursor-pointer hover:border-primary hover:shadow-md transition-custom scenario-card" data-id="2">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="font-semibold text-dark">学习困难的儿童</h3>
                    <span class="text-xs bg-warning/10 text-warning px-2 py-1 rounded-full">进阶</span>
                </div>
                <p class="text-sm text-neutral mb-3">模拟一个学习成绩下滑、对学习失去信心的儿童，需要学习支持。</p>
                <div class="flex items-center text-xs text-neutral">
                    <span class="mr-3"><i class="fa fa-clock-o mr-1"></i> 预计时长: 20分钟</span>
                    <span><i class="fa fa-signal mr-1"></i> 难度: 中级</span>
                </div>
            </div>

            <!-- 场景卡片 3 -->
            <div class="border border-gray-200 rounded-lg p-4 cursor-pointer hover:border-primary hover:shadow-md transition-custom scenario-card" data-id="3">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="font-semibold text-dark">情绪波动的儿童</h3>
                    <span class="text-xs bg-danger/10 text-danger px-2 py-1 rounded-full">挑战</span>
                </div>
                <p class="text-sm text-neutral mb-3">模拟一个情绪不稳定、有行为问题的儿童，需要情绪管理指导。</p>
                <div class="flex items-center text-xs text-neutral">
                    <span class="mr-3"><i class="fa fa-clock-o mr-1"></i> 预计时长: 25分钟</span>
                    <span><i class="fa fa-signal mr-1"></i> 难度: 高级</span>
                </div>
            </div>
        </div>

        <!-- 创建自定义场景按钮 -->
        <div class="mt-6">
            <button class="bg-white border border-dashed border-primary text-primary px-4 py-2 rounded-md hover:bg-primary/5 transition-custom">
                <i class="fa fa-plus-circle mr-2"></i> 创建自定义场景
            </button>
        </div>
    </div>

    <!-- 训练会话区域 (默认隐藏) -->
    <div id="training-session" class="hidden space-y-4">
        <!-- 训练信息 -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex justify-between items-center">
                <div>
                    <h2 class="text-xl font-bold text-dark">训练会话进行中</h2>
                    <p class="text-neutral text-sm mt-1">场景: <span id="current-scenario">孤独的留守儿童</span> | 开始时间: <span id="start-time">2023-07-15 10:30:00</span></p>
                </div>
                <div class="flex space-x-3">
                    <button class="bg-danger text-white px-4 py-2 rounded-md hover:bg-danger/90 transition-custom" id="end-session-btn">
                        <i class="fa fa-stop mr-2"></i> 结束训练
                    </button>
                </div>
            </div>
        </div>

        <!-- 聊天界面 -->
        <div class="bg-white rounded-lg shadow-md p-4">
            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-accent/10 rounded-full flex items-center justify-center text-accent">
                        <i class="fa fa-child text-xl"></i>
                    </div>
                    <div>
                        <h3 class="font-semibold text-dark">模拟儿童</h3>
                        <p class="text-xs text-neutral">正在AI模拟中...</p>
                    </div>
                </div>
            </div>

            <!-- 聊天记录区域 -->
            <div id="chat-messages" class="h-96 overflow-y-auto p-4 bg-light/50 rounded-lg mb-4 space-y-4">
                <!-- 系统消息 -->
                <div class="flex justify-center">
                    <span class="text-xs bg-gray-200 text-gray-700 px-3 py-1 rounded-full">训练会话开始，您正在与模拟留守儿童对话</span>
                </div>

                <!-- AI消息 -->
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-accent/10 rounded-full flex items-center justify-center text-accent shrink-0">
                        <i class="fa fa-child text-sm"></i>
                    </div>
                    <div class="max-w-[80%]">
                        <div class="bg-white p-3 rounded-lg rounded-tl-none shadow-sm">
                            <p class="text-dark">你好，我是小明。你是谁呀？我一个人在家，爸爸妈妈都在外面工作...</p>
                        </div>
                        <span class="text-xs text-neutral mt-1 inline-block">10:31</span>
                    </div>
                </div>

                <!-- 社工消息 -->
                <div class="flex items-start space-x-3 justify-end">
                    <div class="max-w-[80%] text-right">
                        <div class="bg-primary text-white p-3 rounded-lg rounded-tr-none shadow-sm">
                            <p>你好小明，我是李社工，很高兴认识你。你今天过得怎么样？</p>
                        </div>
                        <span class="text-xs text-neutral mt-1 inline-block">10:32</span>
                    </div>
                    <div class="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary shrink-0">
                        <i class="fa fa-user text-sm"></i>
                    </div>
                </div>

                <!-- AI消息 -->
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-accent/10 rounded-full flex items-center justify-center text-accent shrink-0">
                        <i class="fa fa-child text-sm"></i>
                    </div>
                    <div class="max-w-[80%]">
                        <div class="bg-white p-3 rounded-lg rounded-tl-none shadow-sm">
                            <p class="text-dark">我今天过得一般...同学们都有爸爸妈妈来接放学，只有我是自己回家的。我很想爸爸妈妈...</p>
                        </div>
                        <span class="text-xs text-neutral mt-1 inline-block">10:33</span>
                    </div>
                </div>
            </div>

            <!-- AI指导意见区域 -->
            <div class="bg-secondary/5 border border-secondary/20 rounded-lg p-4 mb-4">
                <div class="flex items-center space-x-2 mb-2">
                    <i class="fa fa-lightbulb-o text-secondary text-xl"></i>
                    <h4 class="font-semibold text-secondary">AI指导意见</h4>
                </div>
                <p class="text-sm text-neutral">儿童表现出明显的孤独感和对父母的思念情绪。建议表达理解和共情，肯定他的感受，然后逐渐引导他分享更多内心想法。避免直接否定他的情绪或给予空泛的安慰。</p>
            </div>

            <!-- 输入区域 -->
            <div class="flex items-center space-x-3">
                <input type="text" id="message-input" placeholder="输入您想对小明说的话..." class="flex-1 px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:border-primary transition-custom">
                <button id="send-message-btn" class="bg-primary text-white px-6 py-3 rounded-md hover:bg-primary/90 transition-custom">
                    <i class="fa fa-paper-plane mr-2"></i> 发送
                </button>
            </div>
        </div>
    </div>

    <!-- 训练结果评估区域 (默认隐藏) -->
    <div id="training-results" class="hidden bg-white rounded-lg shadow-md p-6 space-y-4">
        <h2 class="text-xl font-bold text-dark">训练评估结果</h2>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-light rounded-lg p-4 text-center">
                <div class="text-3xl font-bold text-primary">85</div>
                <div class="text-sm text-neutral mt-1">总体评分</div>
            </div>
            <div class="bg-light rounded-lg p-4 text-center">
                <div class="text-3xl font-bold text-secondary">22</div>
                <div class="text-sm text-neutral mt-1">对话轮次</div>
            </div>
            <div class="bg-light rounded-lg p-4 text-center">
                <div class="text-3xl font-bold text-accent">18</div>
                <div class="text-sm text-neutral mt-1">训练时长(分钟)</div>
            </div>
        </div>

        <div class="mt-6">
            <h3 class="font-semibold text-dark mb-3">分项评分</h3>
            <div class="space-y-3">
                <div>
                    <div class="flex justify-between text-sm mb-1">
                        <span>情感识别能力</span>
                        <span>90分</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-success h-2 rounded-full" style="width: 90%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between text-sm mb-1">
                        <span>共情能力</span>
                        <span>85分</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-success h-2 rounded-full" style="width: 85%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between text-sm mb-1">
                        <span>沟通技巧</span>
                        <span>78分</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-warning h-2 rounded-full" style="width: 78%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between text-sm mb-1">
                        <span>问题引导能力</span>
                        <span>82分</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-success h-2 rounded-full" style="width: 82%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-6">
            <h3 class="font-semibold text-dark mb-3">AI综合评价</h3>
            <div class="bg-light rounded-lg p-4">
                <p class="text-neutral text-sm leading-relaxed">
                    您在本次训练中表现优秀，能够很好地识别儿童的情感需求并给予共情回应。特别是在儿童表达孤独感时，您的回应让儿童感受到了被理解和关怀。
                    <br><br>
                    建议在未来的对话中，可以尝试使用更多开放性问题引导儿童表达内心想法，同时注意给予具体的积极反馈，而不仅仅是一般性的安慰。
                    <br><br>
                    继续保持这样的沟通方式，您将能够与留守儿童建立更有效的信任关系，为后续的服务工作奠定良好基础。
                </p>
            </div>
        </div>

        <div class="mt-6 flex space-x-3">
            <button class="bg-primary text-white px-6 py-3 rounded-md hover:bg-primary/90 transition-custom" id="start-new-training-btn">
                <i class="fa fa-refresh mr-2"></i> 开始新训练
            </button>
            <button class="bg-white border border-gray-300 text-neutral px-6 py-3 rounded-md hover:bg-gray-50 transition-custom">
                <i class="fa fa-file-text-o mr-2"></i> 查看训练记录
            </button>
            <button class="bg-white border border-gray-300 text-neutral px-6 py-3 rounded-md hover:bg-gray-50 transition-custom">
                <i class="fa fa-download mr-2"></i> 导出报告
            </button>
        </div>
    </div>
</main>

<!-- JavaScript -->
<script>
    // 场景选择
    document.addEventListener('DOMContentLoaded', function() {
        const scenarioCards = document.querySelectorAll('.scenario-card');
        const scenarioSelection = document.getElementById('scenario-selection');
        const trainingSession = document.getElementById('training-session');
        const trainingResults = document.getElementById('training-results');
        const endSessionBtn = document.getElementById('end-session-btn');
        const sendMessageBtn = document.getElementById('send-message-btn');
        const messageInput = document.getElementById('message-input');
        const chatMessages = document.getElementById('chat-messages');
        const startNewTrainingBtn = document.getElementById('start-new-training-btn');
        const currentScenario = document.getElementById('current-scenario');
        const startTime = document.getElementById('start-time');

        // 场景卡片点击事件
        scenarioCards.forEach(card => {
            card.addEventListener('click', function() {
                const scenarioId = this.getAttribute('data-id');
                const scenarioName = this.querySelector('h3').textContent;

                // 更新当前场景信息
                currentScenario.textContent = scenarioName;

                // 设置开始时间
                const now = new Date();
                startTime.textContent = now.toLocaleString('zh-CN');

                // 隐藏场景选择，显示训练会话
                scenarioSelection.classList.add('hidden');
                trainingSession.classList.remove('hidden');
                trainingResults.classList.add('hidden');

                // 滚动到底部
                chatMessages.scrollTop = chatMessages.scrollHeight;
            });
        });

        // 结束训练按钮点击事件
        endSessionBtn.addEventListener('click', function() {
            // 隐藏训练会话，显示训练结果
            scenarioSelection.classList.add('hidden');
            trainingSession.classList.add('hidden');
            trainingResults.classList.remove('hidden');
        });

        // 发送消息按钮点击事件
        sendMessageBtn.addEventListener('click', function() {
            sendMessage();
        });

        // 输入框回车发送消息
        messageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // 开始新训练按钮点击事件
        startNewTrainingBtn.addEventListener('click', function() {
            // 显示场景选择，隐藏训练结果
            scenarioSelection.classList.remove('hidden');
            trainingSession.classList.add('hidden');
            trainingResults.classList.add('hidden');
        });

        // 发送消息函数
        function sendMessage() {
            const message = messageInput.value.trim();
            if (message) {
                // 添加社工消息
                const now = new Date();
                const timeString = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();

                const workerMessageHTML = `
                        <div class="flex items-start space-x-3 justify-end">
                            <div class="max-w-[80%] text-right">
                                <div class="bg-primary text-white p-3 rounded-lg rounded-tr-none shadow-sm">
                                    <p>${message}</p>
                                </div>
                                <span class="text-xs text-neutral mt-1 inline-block">${timeString}</span>
                            </div>
                            <div class="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary shrink-0">
                                <i class="fa fa-user text-sm"></i>
                            </div>
                        </div>
                    `;

                chatMessages.insertAdjacentHTML('beforeend', workerMessageHTML);

                // 清空输入框
                messageInput.value = '';

                // 滚动到底部
                chatMessages.scrollTop = chatMessages.scrollHeight;

                // 模拟AI回复（简单示例）
                setTimeout(() => {
                    const aiResponses = [
                        "谢谢你的关心，我感觉好多了。有时候我会想，爸爸妈妈是不是不要我了...",
                        "其实我也知道爸爸妈妈是为了工作，但我还是会忍不住想他们。",
                        "我最近在学校交了一个新朋友，他对我很好，我们经常一起玩。",
                        "我喜欢画画，画爸爸妈妈回家的样子。老师说我画得很好看。",
                        "奶奶最近身体不太好，我很担心她。"
                    ];

                    const randomResponse = aiResponses[Math.floor(Math.random() * aiResponses.length)];
                    const aiNow = new Date();
                    const aiTimeString = aiNow.getHours() + ':' + (aiNow.getMinutes() < 10 ? '0' : '') + aiNow.getMinutes();

                    const aiMessageHTML = `
                            <div class="flex items-start space-x-3">
                                <div class="w-8 h-8 bg-accent/10 rounded-full flex items-center justify-center text-accent shrink-0">
                                    <i class="fa fa-child text-sm"></i>
                                </div>
                                <div class="max-w-[80%]">
                                    <div class="bg-white p-3 rounded-lg rounded-tl-none shadow-sm">
                                        <p class="text-dark">${randomResponse}</p>
                                    </div>
                                    <span class="text-xs text-neutral mt-1 inline-block">${aiTimeString}</span>
                                </div>
                            </div>
                        `;

                    chatMessages.insertAdjacentHTML('beforeend', aiMessageHTML);

                    // 滚动到底部
                    chatMessages.scrollTop = chatMessages.scrollHeight;

                }, 1500);
            }
        }
    });
</script>
</body>
</html>